<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>Admin Panel - Lohoba Luxury</title>
  <link rel="stylesheet" href="style.css" />
  <script src="https://www.gstatic.com/firebasejs/9.22.0/firebase-app-compat.js"></script>
  <script src="https://www.gstatic.com/firebasejs/9.22.0/firebase-firestore-compat.js"></script>
  <script>
    // Firebase configuration
    const firebaseConfig = {
      apiKey: "AIzaSyAjt8ZbkaUusAT7oxn1lh-d0aMzxI3ERpg",
      authDomain: "lohoba-luxury.firebaseapp.com",
      projectId: "lohoba-luxury",
      storageBucket: "lohoba-luxury.firebasestorage.app",
      messagingSenderId: "967128471724",
      appId: "1:967128471724:web:84df89cdeb33defcb7e709"
    };
    
    // Initialize Firebase
    try {
      firebase.initializeApp(firebaseConfig);
      console.log('Firebase initialized');
    } catch (error) {
      console.log('Firebase initialization failed, using localStorage');
    }
  </script>
</head>
<body>

  <nav class="navbar">
    <div class="nav-container">
      <div class="logo">Lohoba Luxury Admin</div>
      <ul class="nav-menu">
        <li><a href="index.html" class="nav-link">Back to Site</a></li>
        <li><a href="#" onclick="logout()" class="nav-link">Logout</a></li>
      </ul>
    </div>
  </nav>

  <!-- Login Form -->
  <div id="loginForm" class="admin-login">
    <div class="login-container">
      <h2>Admin Login</h2>
      <form onsubmit="adminLogin(event)">
        <input type="text" id="username" placeholder="Username" required>
        <input type="password" id="password" placeholder="Password" required>
        <button type="submit">Login</button>
      </form>
    </div>
  </div>

  <!-- Admin Dashboard -->
  <div id="adminDashboard" class="admin-dashboard" style="display: none;">
    <div class="container">
      <!-- Dashboard Navigation -->
      <div class="admin-nav-tabs">
        <button class="tab-btn active" onclick="showTab('visitors')">Visitors</button>
        <button class="tab-btn" onclick="showTab('products')">Products</button>
        <button class="tab-btn" onclick="showTab('blog')">Blog</button>
      </div>

      <!-- Visitors Tab -->
      <div id="visitorsTab" class="tab-content active">
        <h2>Website Visitors</h2>
        <div class="stats-grid">
          <div class="stat-card">
            <h3 id="totalVisitors">0</h3>
            <p>Total Visitors</p>
          </div>
          <div class="stat-card">
            <h3 id="todayVisitors">0</h3>
            <p>Today's Visitors</p>
          </div>
          <div class="stat-card">
            <h3 id="uniqueVisitors">0</h3>
            <p>Unique Sessions</p>
          </div>
        </div>
        <div class="visitors-table">
          <h3>Recent Visitors</h3>
          <div id="visitorsTable"></div>
        </div>
      </div>

      <!-- Products Tab -->
      <div id="productsTab" class="tab-content">
        <h2>Product Management</h2>
        <div class="products-overview">
          <div class="stat-card">
            <h3 id="totalProducts">0</h3>
            <p>Total Products</p>
          </div>
          <button onclick="loadProductsData()" class="refresh-btn">üîÑ Load Live Products</button>
          <button onclick="testSheetConnection()" class="refresh-btn" style="background: #3742fa;">üîó Test Sheet</button>
          <button onclick="startAutoRefresh()" class="refresh-btn" style="background: #2ed573;" id="autoRefreshBtn">‚ñ∂Ô∏è Auto Refresh</button>
        </div>
        <div class="products-table">
          <h3>All Products</h3>
          <div id="productsTable"></div>
        </div>
      </div>

      <!-- Blog Tab -->
      <div id="blogTab" class="tab-content">
        <h2>Blog Management</h2>
        
        <!-- Add New Blog Post -->
        <div class="blog-form">
          <h3>Add New Blog Post</h3>
          <form onsubmit="addBlogPost(event)">
            <input type="text" id="blogTitle" placeholder="Blog Title" required>
            <input type="text" id="blogImage" placeholder="Image URL" required>
            <textarea id="blogContent" placeholder="Blog Content" rows="6" required></textarea>
            <button type="submit">Publish Post</button>
          </form>
        </div>

        <!-- Existing Blog Posts -->
        <div class="existing-posts">
          <h3>Manage Posts</h3>
          <div id="postsList"></div>
        </div>
      </div>
    </div>
  </div>

  <script src="admin.js"></script>
</body>
</html>